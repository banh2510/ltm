<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>Tìm Hiểu về Web APIs trong JavaScript - lptriinhmng</title><meta name="description" content="Giới thiệu API Web Worker trong JavaScript Khi lập trình, dev không thể bắt người dùng phải chờ từng tác vụ này thực&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://banh2510.github.io/ltm/tim-hieu-ve-web-apis-trong-javascript.html"><link rel="alternate" type="application/atom+xml" href="https://banh2510.github.io/ltm/feed.xml"><link rel="alternate" type="application/json" href="https://banh2510.github.io/ltm/feed.json"><meta property="og:title" content="Tìm Hiểu về Web APIs trong JavaScript"><meta property="og:image" content="https://banh2510.github.io/ltm/media/posts/9/13.jpg"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="526"><meta property="og:site_name" content="lptriinhmng"><meta property="og:description" content="Giới thiệu API Web Worker trong JavaScript Khi lập trình, dev không thể bắt người dùng phải chờ từng tác vụ này thực&hellip;"><meta property="og:url" content="https://banh2510.github.io/ltm/tim-hieu-ve-web-apis-trong-javascript.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://banh2510.github.io/ltm/assets/css/fontawesome-all.min.css?v=85514f933f9e0b82460af63f1a403fa5"><link rel="stylesheet" href="https://banh2510.github.io/ltm/assets/css/style.css?v=a43d11e6c8e1828dd0b983b73b3cdb13"><noscript><link rel="stylesheet" href="https://banh2510.github.io/ltm/assets/css/noscript.css?v=efa867a99f5064d6729e4dc2008ad50b"></noscript><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://banh2510.github.io/ltm/tim-hieu-ve-web-apis-trong-javascript.html"},"headline":"Tìm Hiểu về Web APIs trong JavaScript","datePublished":"2024-12-31T10:46+07:00","dateModified":"2024-12-31T21:59+07:00","image":{"@type":"ImageObject","url":"https://banh2510.github.io/ltm/media/posts/9/13.jpg","height":526,"width":1200},"description":"Giới thiệu API Web Worker trong JavaScript Khi lập trình, dev không thể bắt người dùng phải chờ từng tác vụ này thực&hellip;","author":{"@type":"Person","name":"bnh","url":"https://banh2510.github.io/ltm/authors/bnh/"},"publisher":{"@type":"Organization","name":"bnh","logo":{"@type":"ImageObject","url":"https://banh2510.github.io/ltm/media/website/Brown_Vintage_Retro_Cake_and_Bakery_Business_Logo__1_-removebg-preview.png","height":500,"width":500}}}</script><style>#wrapper > .bg {
               background-image: url(https://banh2510.github.io/ltm/assets/images/overlay.png), linear-gradient(0deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(https://banh2510.github.io/ltm/media/website/18.avif);
           }</style><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="is-preload post-template"><div id="wrapper"><header id="header"><a class="logo logo-image" href="https://banh2510.github.io/ltm/"><img src="https://banh2510.github.io/ltm/media/website/Brown_Vintage_Retro_Cake_and_Bakery_Business_Logo__1_-removebg-preview.png" alt="lptriinhmng" width="500" height="500"></a></header><nav id="nav"><ul class="links"><li><a href="https://banh2510.github.io/ltm/" target="_self">HOME</a></li><li><a href="https://banh2510.github.io/ltm/tags/blogs/" target="_self">BLOGS</a></li><li><a href="https://banh2510.github.io/ltm/profile.html" target="_self">PROFILE</a></li></ul></nav><main id="main"><article class="post"><header class="major"><time datetime="2024-12-31T10:46" class="date">December 31, 2024</time><h1>Tìm Hiểu về Web APIs trong JavaScript</h1><p class="post__inner"></p></header><figure class="image main"><img src="https://banh2510.github.io/ltm/media/posts/9/13.jpg" srcset="https://banh2510.github.io/ltm/media/posts/9/responsive/13-xs.jpg 300w, https://banh2510.github.io/ltm/media/posts/9/responsive/13-sm.jpg 480w, https://banh2510.github.io/ltm/media/posts/9/responsive/13-md.jpg 768w, https://banh2510.github.io/ltm/media/posts/9/responsive/13-lg.jpg 1024w, https://banh2510.github.io/ltm/media/posts/9/responsive/13-xl.jpg 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="526" width="1200" alt=""></figure><div class="post__inner post__entry"><header class="mb-05"><h1 class="article-content__title">Giới thiệu API Web Worker trong JavaScript</h1></header><div class="d-md-flex align-items-top justify-content-between"><div class="tags d-flex flex-wrap align-items-center" data-v-4365a2a0=""> </div></div><div><div class="el-alert mt-1 el-alert--warning is-light" role="alert"><div class="el-alert__content"> </div></div></div><div class="article-content__body my-2 flex-fill"><div class="md-contents"><p>Khi lập trình, dev không thể bắt người dùng phải chờ từng tác vụ này thực hiện xong mới được thực hiện tác vụ khác được. Nhất là các tác vụ mất nhiều thời gian như xử lý ảnh, file có dung lượng lớn...Và với lập trình viên, chắc hẳn các bạn không lạ gì khái niệm <code>background job</code> hay <code>worker</code>.</p><p>Trong JavaScript cũng có khái niệm này, bài viết này mình tham khảo từ bài viết <a href="https://www.hongkiat.com/blog/web-workers-javascript-api/" target="_blank" rel="noopener">An Introduction to Web Workers JavaScript API</a>.</p><figure class="article-img"><img loading="lazy" src="https://images.viblo.asia/53a7605b-0cd6-481f-957c-1f89da4520a1.jpg" alt="" data-is-external-image="true"></figure><p><code>Web Workers</code> là một API JavaScript, cho phép bạn chạy các script trong một thread riêng biệt từ một trang chính.</p><p>Link API: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API" target="_blank" rel="noopener">Web Worker</a>.</p><p>API <code>Web Workers</code> đã được hỗ trợ trong hầu hết các browser hiện nay, bạn có thể xem thêm chi tiết ở <a href="https://caniuse.com/#feat=webworkers" target="_blank" rel="noopener">CanIUse docs</a>. Trước khi đi vào cụ thể, hãy cùng xem qua một vài kịch bản, khi bạn có lẽ sẽ cần ử dụng API này.</p><h3 id="_kich-ban-su-dung-0">Kịch bản sử dụng</h3><p>Giả sử bạn đang có một lệnh nạp và xử lý một file nào đó; nếu file đó có kích thước lớn thì sẽ mất nhiều thời gian xử lý. Điều này có thể sẽ cản trở các lệnh được gọi đến sau đó.</p><p>Tuy nhiên, nếu chuyển xuống xử lý thành luồng ngầm (background) bên dưới thì các lệnh khác sẽ không bị block cho đến khi nào xử lý file của bạn chạy xong.</p><p>Tương tự, giả sử có một form rất lớn, gồm nhiều tab, khi cập nhật ở tab này thì sẽ gây ra ảnh hưởng đến các tab khác. Nếu việc cập nhật một tab mất một khoảng thời gian thì người dùng không thể liên tục sử dụng tab đó mà không có sự kiện đang được giữ.</p><p>Vì người dùng không thể nhìn thấy các tab khác khi đang điền thông tin vào một tab cụ thể. Trường hợp này cũng có thể sử dụng worker như ở trên.</p><p>Như vậy, khi gặp trường hợp mà một câu lệnh sẽ khóa một người dùng sử dụng giao diện cho đến khi thực hiện xong như 2 trường hợp trên thì ta có thể chuyển qua sử dụng worker.</p><h3 id="_pham-vi-va-kieu-cua-worker-1">Phạm vi và kiểu của worker</h3><p>API <code>Web Worker</code> có lẽ là một trong nhưng API sử dụng đơn giản nhất. Nó có các phương pháp khá đơn giản để khởi tạo worker và gọi đến các worker đó.</p><p>Phạm vi toàn cục của một luồng worker là trong ngữ cảnh khác so với luồng chính. Bạn không thể gọi đến các phương thức và thuộc tính của đối tượng <code>window</code> như <code>alert()</code>... hay là bạn cũng không thể thay đổi <code>DOM</code> trực tiếp từ một luồng worker.</p><p>Tuy nhiên, bạn có thể sử dụng nhiều API nằm dưới <code>window</code> như <code>Promise</code>, <code>Fetch</code>... từ một luồng worker. Bạn có thể xem danh sách các API đó tại <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Functions_and_classes_available_to_workers" target="_blank" rel="noopener">đây</a>.</p><p>Bạn cũng có thể có nhiều luồng worker lồng nhau, một luồng worker được khởi tạo ngay bên trong một worker khác, khi đó ta gọi là <code>subworker</code>.</p><p>Cũng có nhiều kiểu của worker, có 2 kiểu chính là <code>dedicated</code> và <code>shared</code>.</p><p>Trong bài viết này, các ví dụ sẽ là <code>dedicated</code> - kiểu phổ biến nhất.</p><h3 id="_api-methods-2">API methods</h3><p>Biểu đồ bên dưới là các phương thức chính cấu thành nên API <code>Web Worker</code>.</p><figure class="article-img"><img loading="lazy" src="https://images.viblo.asia/86a1a887-02f4-4636-8625-368317d33daa.jpg" alt="" data-is-external-image="true"></figure><ul><li><p><code>Worker()</code> =&gt; khởi tạo một luồng worker <code>dedicated</code> và trả về một đối tượng tham chiếu của nó. Sau đó, bạn có thể sử dụng các đối tượng này để làm việc với từng worker cụ thể.</p></li><li><p><code>postMessage()</code> =&gt; Phương thức được sử dụng trong cả luồng chính và luồng worker để gửi dữ liệu giữa 2 bên với nhau. Một bên gửi dữ liệu thì bên kia sẽ nhận bằng xử lý sự kiện <code>onmessage</code>.</p></li><li><p><code>terminate()</code> =&gt; Phương thức để dừng một worker từ luồng chính, phương thức này thực hiện ngay lập tức, bất kỳ lệnh nào đang thực hiện hay đang chờ cũng sẽ đều bị dùng lại hết. Phương thức <code>close()</code> cũng thực hiện việc tương tự nhưng được gọi từ một worker để dừng chính nó.</p></li></ul><h3 id="_code-vi-du-3">Code ví dụ</h3><p>Kịch bản chính nằm trong thẻ <code>&lt;script&gt;</code> của file <code>index.html</code>, trong khi worker nằm trong file <code>worker.js</code>.</p><div style="box-sizing: border-box; position: relative;"><pre class="language-html" data-filename=""><code>&lt;button&gt;Click me&lt;/button&gt;
&lt;script&gt;
&lt;!-- main script goes here --&gt;
&lt;/script&gt;
</code></pre><button class="v-markdown-it-code-copy" style="box-sizing: border-box; border-radius: 5px; margin: 0px; font-family: inherit; font-size: inherit; line-height: inherit; overflow: visible; text-transform: none; appearance: button; position: absolute; display: flex; align-items: center; justify-content: center; top: 7.5px; right: 6px; cursor: pointer; outline: none; border: none; background: #655454; height: 25px; opacity: 0.5;" title="Sao chép" data-clipboard-text="&lt;button&gt;Click me&lt;/button&gt;
&lt;script&gt;
&lt;!-- main script goes here --&gt;
&lt;/script&gt;
"></button></div><p>Khởi tạo một worker từ luồng chính như sau:</p><div style="box-sizing: border-box; position: relative;"><pre class="language-html" data-filename=""><code>&lt;script&gt;
  w = new Worker('worker.js');
&lt;/script&gt;
</code></pre><button class="v-markdown-it-code-copy" style="box-sizing: border-box; border-radius: 5px; margin: 0px; font-family: inherit; font-size: inherit; line-height: inherit; overflow: visible; text-transform: none; appearance: button; position: absolute; display: flex; align-items: center; justify-content: center; top: 7.5px; right: 6px; cursor: pointer; outline: none; border: none; background: #655454; height: 25px; opacity: 0.5;" title="Sao chép" data-clipboard-text="&lt;script&gt;
  w = new Worker('worker.js');
&lt;/script&gt;
"></button></div><p>Phương thức <code>Worker()</code> sử dụng path của file chứa worker là một argument.</p><p>Tiếp đó, ta thêm xử lý sự kiện cho sự kiện <code>onmessage</code> cho worker mới được tạo ở trên để nhận data từ nó. Thuộc tính <code>data</code> của sự kiện <code>e</code> chính là nơi dữ data nhận được.</p><div style="box-sizing: border-box; position: relative;"><pre class="language-html" data-filename=""><code>&lt;script&gt;
  w = new Worker('worker.js');
  w.onmessage = (e)=&gt;{
    console.log(`Received from worker: ${e.data}`);
  }
&lt;/script&gt;
</code></pre><button class="v-markdown-it-code-copy" style="box-sizing: border-box; border-radius: 5px; margin: 0px; font-family: inherit; font-size: inherit; line-height: inherit; overflow: visible; text-transform: none; appearance: button; position: absolute; display: flex; align-items: center; justify-content: center; top: 7.5px; right: 6px; cursor: pointer; outline: none; border: none; background: #655454; height: 25px; opacity: 0.5;" title="Sao chép" data-clipboard-text="&lt;script&gt;
  w = new Worker('worker.js');
  w.onmessage = (e)=&gt;{
    console.log(&#96;Received from worker: ${e.data}&#96;);
  }
&lt;/script&gt;
"></button></div><p>Bây giờ ta sử dụng phương thức <code>postMessage()</code> để gửi data đến luồng worker. Phương thức này có thể có 2 argument:</p><ul><li>arg đầu tiên có thể là bất kỳ kiểu dữ liệu (string, array,...) nào.</li><li>arg thứ 2 không bắt buộc phải có, nó là mảng các đối tượng có thể được sử dụng trong luồng worker.</li></ul><p>Ta gửi data đến worker bằng cách click button.</p><div style="box-sizing: border-box; position: relative;"><pre class="language-html" data-filename=""><code>&lt;script&gt;
  document.querySelector('button').onclick = ()=&gt;{
    w.postMessage('john');
  }
&lt;/script&gt;
</code></pre><button class="v-markdown-it-code-copy" style="box-sizing: border-box; border-radius: 5px; margin: 0px; font-family: inherit; font-size: inherit; line-height: inherit; overflow: visible; text-transform: none; appearance: button; position: absolute; display: flex; align-items: center; justify-content: center; top: 7.5px; right: 6px; cursor: pointer; outline: none; border: none; background: #655454; height: 25px; opacity: 0.5;" title="Sao chép" data-clipboard-text="&lt;script&gt;
  document.querySelector('button').onclick = ()=&gt;{
    w.postMessage('john');
  }
&lt;/script&gt;
"></button></div><p>Trong worker, ta cần xử lý sự kiện <code>onmessage</code> để nhận data được gửi đến, nối xác string nhận được, xử lý rồi trả kết quả cuối cùng về cho luồng chính.</p><p>File <code>worker.js</code> như sau:</p><div style="box-sizing: border-box; position: relative;"><pre class="language-javascript" data-filename=""><code>console.info('worker created');
onmessage = (e)=&gt;{
  postMessage(`Hi ${e.data}`);
}
</code></pre><button class="v-markdown-it-code-copy" style="box-sizing: border-box; border-radius: 5px; margin: 0px; font-family: inherit; font-size: inherit; line-height: inherit; overflow: visible; text-transform: none; appearance: button; position: absolute; display: flex; align-items: center; justify-content: center; top: 7.5px; right: 6px; cursor: pointer; outline: none; border: none; background: #655454; height: 25px; opacity: 0.5;" title="Sao chép" data-clipboard-text="console.info('worker created');
onmessage = (e)=&gt;{
  postMessage(&#96;Hi ${e.data}&#96;);
}
"></button></div><p>Không cần một đối tượng tham chiếu trong luồng worker để trỏ đến luồng chính của bạn.</p><p>Ở ví dụ trên, code sẽ chạy như sau. Khi Browser load <code>index.html</code>, console sẽ show ra dòng <code>worker created</code> ngay khi <code>worker</code> được khởi tạo.</p><p>Khi bạn click vào button, bạn sẽ nhận được dòng <code>eceived from worker: Hi john</code> trong console, dòng này là kết quả trả về sau khi worker đã làm việc.</p><h3 id="_tham-khao-4">Tham khảo</h3><ul><li><a href="https://www.hongkiat.com/blog/web-workers-javascript-api/" target="_blank" rel="noopener">https://www.hongkiat.com/blog/web-workers-javascript-api/</a></li></ul><hr><p>Cám ơn bạn đã theo dõi bài viết này!</p></div></div></div><footer class="post__inner post__footer"><p class="post__last-updated">This article was updated on December 31, 2024</p><div class="post__share-tag-container"><div class="post__tag"><h3>Tagged in:</h3><ul><li><a href="https://banh2510.github.io/ltm/tags/blogs/">Blogs</a></li></ul></div><div class="post__share"><button class="post__share-button js-post__share-button icon" aria-label="Share button"><i class="fas fa-share-alt"></i></button><div class="post__share-popup js-post__share-popup"></div></div></div><div class="post__bio"><div><h3><a href="https://banh2510.github.io/ltm/authors/bnh/" class="invert" rel="author">bnh</a></h3></div></div></footer></article><div><strong>You should also read:</strong></div><div class="posts"><article><header><time datetime="2024-12-31T10:46" class="date">December 31, 2024</time><h2><a href="https://banh2510.github.io/ltm/cong-cu-debugging-va-testing-trong-javascript.html">DEBUG JAVASCRIPT – DỄ HAY KHÓ?</a></h2></header><a href="https://banh2510.github.io/ltm/cong-cu-debugging-va-testing-trong-javascript.html" class="image fit"><img src="https://banh2510.github.io/ltm/media/posts/10/20.png" srcset="https://banh2510.github.io/ltm/media/posts/10/responsive/20-xs.png 300w, https://banh2510.github.io/ltm/media/posts/10/responsive/20-sm.png 480w, https://banh2510.github.io/ltm/media/posts/10/responsive/20-md.png 768w, https://banh2510.github.io/ltm/media/posts/10/responsive/20-lg.png 1024w, https://banh2510.github.io/ltm/media/posts/10/responsive/20-xl.png 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="170" width="297" alt=""></a><p>Với mọi ngôn ngữ lập trình, debug là một hoạt động khó và mất nhiều thời gian nhất. Trong đó, debug JavaScript là khó khăn&hellip;</p><ul class="actions special"><li><a href="https://banh2510.github.io/ltm/cong-cu-debugging-va-testing-trong-javascript.html" class="button">Full Story</a></li></ul></article><article><header><time datetime="2024-12-31T10:45" class="date">December 31, 2024</time><h2><a href="https://banh2510.github.io/ltm/phat-trien-ung-dung-web-voi-javascript-frameworks.html">Top 10 JavaScript Framework phổ biến nhất cho phát triển web</a></h2></header><a href="https://banh2510.github.io/ltm/phat-trien-ung-dung-web-voi-javascript-frameworks.html" class="image fit"><img src="https://banh2510.github.io/ltm/media/posts/8/21.jpg" srcset="https://banh2510.github.io/ltm/media/posts/8/responsive/21-xs.jpg 300w, https://banh2510.github.io/ltm/media/posts/8/responsive/21-sm.jpg 480w, https://banh2510.github.io/ltm/media/posts/8/responsive/21-md.jpg 768w, https://banh2510.github.io/ltm/media/posts/8/responsive/21-lg.jpg 1024w, https://banh2510.github.io/ltm/media/posts/8/responsive/21-xl.jpg 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="162" width="311" alt=""></a><p>JavaScript là ngôn ngữ đa mô hình hỗ trợ các kiểu lập trình theo sự kiện, chức năng và bắt buộc (bao gồm hướng đối tượng và&hellip;</p><ul class="actions special"><li><a href="https://banh2510.github.io/ltm/phat-trien-ung-dung-web-voi-javascript-frameworks.html" class="button">Full Story</a></li></ul></article><article><header><time datetime="2024-12-31T10:45" class="date">December 31, 2024</time><h2><a href="https://banh2510.github.io/ltm/lap-trinh-huong-doi-tuong-oop-trong-javascript.html">Lập Trình Hướng Đối Tượng (OOP) trong JavaScript</a></h2></header><a href="https://banh2510.github.io/ltm/lap-trinh-huong-doi-tuong-oop-trong-javascript.html" class="image fit"><img src="https://banh2510.github.io/ltm/media/posts/7/22.png" srcset="https://banh2510.github.io/ltm/media/posts/7/responsive/22-xs.png 300w, https://banh2510.github.io/ltm/media/posts/7/responsive/22-sm.png 480w, https://banh2510.github.io/ltm/media/posts/7/responsive/22-md.png 768w, https://banh2510.github.io/ltm/media/posts/7/responsive/22-lg.png 1024w, https://banh2510.github.io/ltm/media/posts/7/responsive/22-xl.png 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="168" width="300" alt=""></a><p>Trong bài chia sẻ lần này, mình xin giới thiệu với các bạn tổng quát về khái niệm OOP trong Javascipt, cụ thể&hellip;</p><ul class="actions special"><li><a href="https://banh2510.github.io/ltm/lap-trinh-huong-doi-tuong-oop-trong-javascript.html" class="button">Full Story</a></li></ul></article></div></main><footer id="copyright"><ul><li>© Massively</li><li>Design: <a href="https://html5up.net" target="_blank" rel="nofollow noopener">HTML5 UP</a></li><li>Powered by Publii</li></ul></footer></div><script src="https://banh2510.github.io/ltm/assets/js/jquery.min.js?v=c9771cc3e90e18f5336eedbd0fffb2cf"></script><script src="https://banh2510.github.io/ltm/assets/js/jquery.scrollex.min.js?v=f89065e3d988006af9791b44561d7c90"></script><script src="https://banh2510.github.io/ltm/assets/js/jquery.scrolly.min.js?v=1ed5a78bde1476875a40f6b9ff44fc14"></script><script src="https://banh2510.github.io/ltm/assets/js/browser.min.js?v=c07298dd19048a8a69ad97e754dfe8d0"></script><script src="https://banh2510.github.io/ltm/assets/js/breakpoints.min.js?v=81a479eb099e3b187613943b085923b8"></script><script src="https://banh2510.github.io/ltm/assets/js/util.min.js?v=4201a626f8c9b614a663b3a1d7d82615"></script><script src="https://banh2510.github.io/ltm/assets/js/main.min.js?v=56233c354bd814758be8bff42f7e13a5"></script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script></body></html>